###General
profile=gpu-hq
gpu-api=vulkan
vo=gpu 
vulkan-async-compute=yes
vulkan-async-transfer=yes
vulkan-queue-count=1
vd-lavc-dr=yes
hwdec=auto
priority=high # Makes PC prioritize MPV for allocating resources.
cursor-autohide-fs-only
reset-on-next-file=pause # Resumes playback when skip to next file
volume=100 # Set volume to 100% on startup.
volume-max=200 # Set player max vol to 200%.
osc=no # required so that the 2 UIs don't fight each other
osd-bar=no # uosc provides its own seeking/volume indicators, so you also don't need this
border=no # uosc will draw its own window controls if you disable window border
no-hidpi-window-scale # This Disables High DPI scaling
deinterlace=no
deband=no
keep-open=yes
audio-pitch-correction=yes # automatically insert scaletempo when playing with higher speed
fs=yes
# Sets a custom font
#osd-font='Iosevka'

###Interpolation (May increase CPU usage)
interpolation=yes
video-sync=display-resample
tscale=box
tscale-window=quadric
tscale-clamp=0.0
tscale-radius=1.025

###Subtitles
alang = 'jpn,jp,ja,eng,en' 
slang = 'eng,en,enUS,enm' # enUS for Crunchyroll and enm for honorifics
sub-fix-timing=yes
sub-scale=1
sub-auto=fuzzy
sub-gray=yes # Monochrome subs makes yellow font grey
sub-font='Trebuchet MS'
sub-bold=yes # Set the font to bold.
sub-file-paths=** # This is for fuzzy-dir script to work
#sub-font-size=55 # Set default subtitle size if not specified.

###Youtube-dl settings
ytdl-format=bestvideo[height<=?1080]+bestaudio/best # Set max streaming quality as 1080p.

#Default demuxer is 150/75 MB, note that this uses RAM so set a reasonable amount.
demuxer-mkv-subtitle-preroll=yes
demuxer-max-bytes=150000000 # 150MB, Max pre-load for network streams (1 MiB = 1048576 Bytes).
demuxer-max-back-bytes=75000000 # 75MB, Max loaded video kept after playback.
force-seekable=yes # Force stream to be seekable even if disabled.

dither-depth=auto

###Profiles 


[Web]                              
	profile-cond=string.match(p.filename, "HorribleSubs")~=nil or string.match(p.filename, "Erai%-raws")~=nil or string.match(p.filename, "SubsPlease")~=nil
	deband=yes

[Mini-Encode #1]                  
	profile-cond=string.match(p.filename, "ASW")~=nil or string.match(p.filename, "DKB")~=nil or string.match(p.filename, "Judas")~=nil
	deband=yes

[Mini-Encode #2]                   
	profile-cond=string.match(p.filename, "Cerberus")~=nil or string.match(p.filename, "Nep%_Blanc")~=nil or string.match(p.filename, "Reaktor")~=nil
	deband=yes

[Mini-Encode #3]                   
	profile-cond=string.match(p.filename, "Cleo")~=nil or string.match(p.filename, "Akihito")~=nil or string.match(p.filename, "Reaktor")~=nil
	deband=yes

[Mini-Encode #4]                   
	profile-cond=string.match(p.filename, "Ember")~=nil 
	deband=yes

[Anime]
	profile-cond=require 'mp.utils'.join_path(working_directory, path):match('Anime') ~= nil
	profile-restore=copy
	deband=yes #Default values are 1:64:16:48
	deband-iterations=2 # Range 1-16.
	deband-threshold=35 # Range 0-4096.
	deband-range=20 # Range 1-64.
	deband-grain=5 # Range 0-4096.
	glsl-shaders-clr
	glsl-shaders="~~/shaders/Anime4K_Clamp_Highlights.glsl;~~/shaders/Anime4K_Restore_CNN_VL.glsl;~~/shaders/Anime4K_Upscale_CNN_x2_VL.glsl;~~/shaders/Anime4K_Restore_CNN_M.glsl;~~/shaders/Anime4K_AutoDownscalePre_x2.glsl;~~/shaders/Anime4K_AutoDownscalePre_x4.glsl;~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl"

[NotAnime]
	profile-cond=(working_directory .. path):match('Anime') == nil
	profile-restore=copy
	fbo-format=rgba16hf
	glsl-shaders-clr	
	glsl-shaders="~~/shaders/SSimDownscaler.glsl;~~/shaders/FSRCNNX_x2_8-0-4-1.glsl;~~/shaders/KrigBilateral.glsl"
	scale=ewa_lanczos
	dscale=mitchell
	linear-downscaling=no
	cscale=mitchell # ignored with gpu-next
	sigmoid-upscaling=yes
	
[Twitch]
	profile-cond=get("path", ""):find("^https://www.twitch.tv/") ~= nil
	profile-restore=copy-equal
	sub-font-size=30
	sub-align-x=right
	sub-align-y=top
	sub-scale=0.5

[Youtube]
	profile-cond=get("path", ""):find("^https://www.youtube.com/") ~= nil or get("path", ""):find("^https://youtu.be/") ~= nil
	profile-restore=copy-equal
	ytdl-raw-options=sub-lang="en,en-GB",write-sub=,write-auto-sub=,ignore-config=
	sub-scale=0.5
	sub-back-color=0.0/0.75
	
[Audio]
	profile-cond=string.match(p.filename, "%.mp3$")~=nil or string.match(p.filename, "%.ogg$")~=nil or string.match(p.filename, "%.wav$")~=nil or string.match(p.filename, "%.flac$")~=nil or string.match(p.filename, "%.aac$")~=nil or string.match(p.filename, "%.wma$")~=nil or string.match(p.filename, "%.m4a$")~=nil or string.match(p.filename, "%.opus$")~=nil or string.match(p.filename, "%.vorbis$")~=nil or string.match(p.filename, "%.alac$")~=nil#  ("%.flac$" and "%.mp3$" are lua string patterns that match strings only if they ends in ".flac" or ".mp3" respectively).
	fs=no
	geometry=20%+100%+0% # the syntax here is: <size of the window>+<x value of the position>+<y value of the position>

[Video]
	profile-cond=get("current-tracks/video/albumart") == false
	profile-restore=copy-equal
	fs=yes
	save-position-on-quit
	watch-later-options-add=video-zoom

[autoloop]
	profile-cond=duration <= 60
	profile-restore=copy-equal
	loop-file=inf

[protocol.http]
	hls-bitrate=max # use max quality for HLS streams
	cache=yes
	no-cache-pause # don't pause when the cache runs low

[protocol.https]
	profile=protocol.http

[protocol.ytdl]
	profile=protocol.http